<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<title>Pizza POS System</title>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', sans-serif;
}

body {
    background: #111;
    color: white;
    height: 100vh;
    overflow: hidden;
}

/* HEADER */
.header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 60px;
    z-index: 1000;
    background: #fff;
    padding: 10px 0;
    border-bottom: 1px solid #eee;
}

.brand {
    max-width: 100%;
    overflow: hidden;
}

.categories {
    display: flex;
    gap: 10px;
    overflow-x: auto;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    padding: 0 10px;
}

.categories::-webkit-scrollbar {
    display: none;
}

.category {
    flex: 0 0 auto;
    padding: 10px 20px;
    background: #2a2a2a;
    border-radius: 20px;
    cursor: pointer;
    transition: 0.3s;
    width: 100px;
    text-align: center;
}

.category.active,
.category:hover {
    background: orange;
    color: black;
}

/* MAIN */
.main-wrapper {
    display: flex;
    margin-top: 70px;
    height: calc(100vh - 70px);
}

.sidebar {
    width: 80px;
    background: #1a1a1a;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px 0;
}

.sidebar div {
    margin: 20px 0;
    font-size: 22px;
    cursor: pointer;
    transition: 0.3s;
}

.sidebar div:hover {
    transform: scale(1.2);
}

.container {
    flex: 1;
    display: flex;
}

/* PRODUCTS */
.products-section {
    flex: 3;
    padding: 20px;
    overflow-y: auto;
}

.products {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 10px;
}

.card {
    background: gray;
    border-radius: 15px;
    padding: 10px;
    transition: 0.3s;
}

.card:hover {
    transform: translateY(-5px);
}

.card img {
    width: 100%;
    height: 100px;
    object-fit: cover;
    border-radius: 10px;
}

.card h5 {
    margin: 5px 0;
}

.card p {
    font-weight: bold;
    color: orange;
}

.card i {
    font-size: 25px;
    cursor: pointer;
}

/* CART */
.cart {
    flex: 1;
    background: #1a1a1a;
    padding: 10px;
    display: flex;
    flex-direction: column;
}

.cart-items {
    flex: 1;
    overflow-y: auto;
}

.cart-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 5px;
    background: #2a2a2a;
    padding: 10px;
    border-radius: 8px;
}

.qty-control {
    display: flex;
    gap: 5px;
    align-items: center;
}

.qty-control button {
    background: orange;
    border: none;
    width: 25px;
    height: 25px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
}

.summary {
    margin-top: 15px;
    border-top: 1px solid #444;
    padding-top: 10px;
}

.summary div {
    display: flex;
    justify-content: space-between;
    margin: 5px 0;
}

.checkout-btn {
    background: orange;
    padding: 10px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    margin-top: 10px;
    font-weight: bold;
}

/* PAYMENT */
.payment {
    flex: 1;
    background: #1a1a1a;
    padding: 20px;
    display: flex;
    flex-direction: column;
}

.payment-total {
    text-align: center;
    margin: 30px 0;
}

.payment-total h1 {
    color: orange;
}

.payment-methods {
    display: flex;
    gap: 10px;
    justify-content: center;
    margin-bottom: 20px;
}

.payment-methods button {
    padding: 12px 20px;
    background: #2a2a2a;
    border: none;
    border-radius: 8px;
    color: white;
    cursor: pointer;
    font-weight: bold;
}

.payment-methods button.active {
    background: orange;
    color: black;
}

.back-btn,
.confirm-btn {
    padding: 10px 15px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}

.back-btn { background: gray; }
.confirm-btn { background: orange; }

/* Responsive */
@media(max-width:768px){
    body{overflow:auto;}
    .sidebar{display:none;}
    .main-wrapper{flex-direction:column;height:auto;}
    .container{flex-direction:column;}
    .products-section{height:auto;}
}
</style>
</head>

<body>

<div class="header">
<div class="brand">
<div class="categories">
<div class="category active" onclick="filterCategory('All', event)">All</div>
<div class="category" onclick="filterCategory('Pizza', event)">Pizza</div>
<div class="category" onclick="filterCategory('Drinks', event)">Drinks</div>
<div class="category" onclick="filterCategory('Dessert', event)">Dessert</div>
<div class="category" onclick="filterCategory('Coffee', event)">Coffee</div>
<div class="category" onclick="filterCategory('Fried', event)">Fried</div>
<div class="category" onclick="filterCategory('Silog', event)">Silog</div>
</div>
</div>
</div>

<div class="main-wrapper">

<div class="sidebar">
<div>üçï</div>
<div>üçî</div>
<div>ü•§</div>
</div>

<div class="container">

<div class="products-section">
<div class="products" id="productList"></div>
</div>

<div class="cart">
<h2>Cart</h2>
<div class="cart-items" id="cartItems"></div>

<div class="summary">
<div><span>Subtotal</span><span id="subtotal">‚Ç±0.00</span></div>
<div><span>Tax (5%)</span><span id="tax">‚Ç±0.00</span></div>
<div><strong>Total</strong><strong id="total">‚Ç±0.00</strong></div>
</div>

<button class="checkout-btn" onclick="checkout()">Proceed</button>
</div>

</div>

<div class="payment" id="paymentSection" style="display:none;">
<h2>Payment</h2>

<div class="payment-total">
<h3>Total Amount</h3>
<h1 id="paymentTotal">‚Ç±0.00</h1>
</div>

<div class="payment-methods">
<button onclick="selectPayment('Cash', event)">üíµ Cash</button>
<button onclick="selectPayment('Card', event)">üí≥ Card</button>
</div>

<div id="cashForm" style="display:none; margin-top:20px;">
<label>Cash Received:</label>
<input type="number" id="cashInput" 
style="width:100%;padding:8px;margin-top:5px;border-radius:6px;border:none;">
<div style="margin-top:10px;">
<strong>Change:</strong> <span id="changeAmount">‚Ç±0.00</span>
</div>
</div>

<div id="cardQR" style="display:none; text-align:center; margin-top:20px;">
<p>Scan QR to Pay</p>
<img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=PizzaPOSPayment" width="200">
<br><br>
<button onclick="simulateCardPayment()" 
style="padding:10px 20px;background:orange;border:none;border-radius:8px;cursor:pointer;">
I've Paid
</button>
</div>

<div class="payment-actions">
<button class="back-btn" onclick="goBack()">‚¨Ö Back</button>
<button class="confirm-btn" onclick="confirmCashPayment()">Confirm</button>
</div>
</div>

</div>

<script>
/* ================= silog PRODUCTS ================= */
const TAX_RATE = 0.0;

const products = [
{ id: 1, name: "Classic Margherita", price: 12.99, category: "Pizza" },
{ id: 2, name: "Pepperoni Supreme", price: 14.49, category: "Pizza" },
{ id: 3, name: "Hawaiian Pizza", price: 13.99, category: "Pizza" },
{ id: 4, name: "Coca Cola", price: 2.99, category: "Drinks" },
{ id: 7, name: "Halo-Halo", price: 13.99, category: "Dessert" },
{ id: 10, name: "Leche Flan", price: 13.99, category: "Dessert" },
{ id: 5, name: "Pork Silog", price: 12.99, category: "Silog" },
{ id: 8, name: "Coffee Latte", price: 12.99, category: "Coffee" },
{ id: 6, name: "Kopiko", price: 2.99, category: "Coffee" },
{ id: 9, name: "Fried Chicken", price: 8.99, category: "Fried" }

];

let cart = [];
let selectedPayment = "";
let finalTotal = 0;

function renderProducts(list) {
const container = document.getElementById("productList");

container.innerHTML = list.map(product => {

    const cartItem = cart.find(item => item.id === product.id);
    const qty = cartItem ? cartItem.qty : 0;

    return `
    <div class="card">
        <img src="https://via.placeholder.com/150">
        <h5>${product.name}</h5>

        <div style="display:flex;justify-content:space-between;align-items:center;">
            <p>‚Ç±${product.price.toFixed(2)}</p>

            ${
                qty === 0
                ? `<i class="fas fa-shopping-cart"
                      style="cursor:pointer;font-size:22px;"
                      onclick="addToCart(${product.id})"></i>`
                : `
                <div style="display:flex;align-items:center;gap:5px;">
                    <button onclick="changeQty(${product.id}, -1)"
                        style="width:22px;height:22px;border:none;border-radius:5px;background:orange;font-weight:bold;">-</button>
                    
                    <span style="min-width:20px;text-align:center;">${qty}</span>
                    
                    <button onclick="changeQty(${product.id}, 1)"
                        style="width:22px;height:22px;border:none;border-radius:5px;background:orange;font-weight:bold;">+</button>
                </div>
                `
            }
        </div>
    </div>
    `;
}).join("");
}


function filterCategory(category, e) {
document.querySelectorAll('.category').forEach(c=>c.classList.remove('active'));
e.target.classList.add('active');
renderProducts(category==="All"?products:products.filter(p=>p.category===category));
}

function addToCart(id){
const product=products.find(p=>p.id===id);
const item=cart.find(p=>p.id===id);
item?item.qty++:cart.push({...product,qty:1});
renderCart();
}

function renderCart(){
    const container=document.getElementById("cartItems");
    container.innerHTML=cart.map(item=>`
    <div class="cart-item">
        <div>${item.name}<br>‚Ç±${item.price.toFixed(2)}</div>
        <div class="qty-control">
            <button onclick="changeQty(${item.id},-1)">-</button>
            ${item.qty}
            <button onclick="changeQty(${item.id},1)">+</button>
            <button onclick="removeItem(${item.id})">X</button>
        </div>
    </div>
    `).join("");

    updateSummary();

    // üî• THIS LINE IS IMPORTANT
    renderProducts(products);
}


function removeItem(id){cart=cart.filter(i=>i.id!==id);renderCart();}
function changeQty(id,c){const item=cart.find(i=>i.id===id);if(!item)return;item.qty+=c;if(item.qty<=0)removeItem(id);else renderCart();}

function updateSummary(){
const subtotal=cart.reduce((s,i)=>s+i.price*i.qty,0);
const tax=subtotal*TAX_RATE;
finalTotal=subtotal+tax;
document.getElementById("subtotal").innerText=`‚Ç±${subtotal.toFixed(2)}`;
document.getElementById("tax").innerText=`‚Ç±${tax.toFixed(2)}`;
document.getElementById("total").innerText=`‚Ç±${finalTotal.toFixed(2)}`;
}

function checkout(){
if(cart.length===0)return alert("Cart is empty!");
document.querySelector(".cart").style.display="none";
document.getElementById("paymentSection").style.display="flex";
document.getElementById("paymentTotal").innerText=`‚Ç±${finalTotal.toFixed(2)}`;
}

function selectPayment(method,e){
selectedPayment=method;
document.querySelectorAll(".payment-methods button").forEach(b=>b.classList.remove("active"));
e.target.classList.add("active");
document.getElementById("cashForm").style.display=method==="Cash"?"block":"none";
document.getElementById("cardQR").style.display=method==="Card"?"block":"none";
}

function confirmCashPayment(){
if(selectedPayment!=="Cash")return alert("Select Cash payment");
const cash=parseFloat(document.getElementById("cashInput").value);
if(!cash||cash<finalTotal)return alert("Insufficient cash");
completeOrder("Cash");
}

function simulateCardPayment(){
if(selectedPayment!=="Card")return alert("Select Card payment");
completeOrder("Card");
}

function completeOrder(method){
alert("Payment Successful via "+method);
printReceipt(method);
cart=[];
renderCart();
goBack();
}

function goBack(){
document.getElementById("paymentSection").style.display="none";
document.querySelector(".cart").style.display="flex";
document.getElementById("cashInput").value="";
document.getElementById("changeAmount").innerText="‚Ç±0.00";
selectedPayment="";
}

function printReceipt(method){
let receipt=window.open("","","width=300,height=600");
let items=cart.map(i=>`${i.name} x${i.qty} - ‚Ç±${(i.price*i.qty).toFixed(2)}`).join("<br>");
receipt.document.write(`
<html><body style="font-family:monospace;padding:10px;">
<h2>Cart Avenue</h2>
<hr>
${items}
<hr>
<h3>Total: ‚Ç±${finalTotal.toFixed(2)}</h3>
<h3>Payment: ${method}</h3>
<hr>
<center>Thank you!</center>
</body></html>`);
receipt.document.close();
receipt.print();
}

renderProducts(products);
</script>

</body>
</html>
